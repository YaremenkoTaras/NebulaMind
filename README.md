# NebulaMind ü§ñüíπ

> **LLM-–∫–µ—Ä–æ–≤–∞–Ω–∏–π —Ç–æ—Ä–≥–æ–≤–∏–π –±–æ—Ç** –¥–ª—è –∫—Ä–∏–ø—Ç–æ—Ä–∏–Ω–∫—É –Ω–∞ –±–∞–∑—ñ Agent Builder –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –¥–µ–ø–ª–æ—é –Ω–∞ Fly.io

## üéØ –û–≥–ª—è–¥ –ø—Ä–æ—î–∫—Ç—É

**NebulaMind** ‚Äî —Ü–µ –º–æ–¥—É–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–æ—ó —Ç–æ—Ä–≥—ñ–≤–ª—ñ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞–º–∏, –¥–µ:

- **LLM (Agent Builder)** –≤–∏—Å—Ç—É–ø–∞—î —è–∫ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä, —â–æ –∞–Ω–∞–ª—ñ–∑—É—î —Ä–∏–Ω–æ–∫ —ñ –ø—Ä–∏–π–º–∞—î —Ä—ñ—à–µ–Ω–Ω—è
- **Trading Core** (Spring Boot 3 / Java 21) —Ä–µ–∞–ª—ñ–∑—É—î –≤—Å—é —Ç–æ—Ä–≥–æ–≤—É –ª–æ–≥—ñ–∫—É, —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –∑ –±—ñ—Ä–∂–∞–º–∏
- **Agent Console** (React/Next.js) –Ω–∞–¥–∞—î –∑—Ä—É—á–Ω–∏–π UI –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ –∫–æ–Ω—Ç—Ä–æ–ª—é
- **CI/CD pipeline** –∑–∞–±–µ–∑–ø–µ—á—É—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ Fly.io

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
NebulaMind/
‚îú‚îÄ app/
‚îÇ  ‚îú‚îÄ trading-core/        # Java 21 / Spring Boot 3 ‚Äî —Ç–æ—Ä–≥–æ–≤–∞ –ª–æ–≥—ñ–∫–∞
‚îÇ  ‚îú‚îÄ agent-builder/       # Agent Builder runtime ‚Äî LLM –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è
‚îÇ  ‚îî‚îÄ agent-console/       # React/Next.js ‚Äî UI –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é
‚îÇ
‚îú‚îÄ docs/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø—Ä–æ—î–∫—Ç—É
‚îú‚îÄ cicd/                   # CI/CD –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Ç–∞ —Å–∫—Ä–∏–ø—Ç–∏
‚îÇ  ‚îú‚îÄ local/              # –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ (docker-compose, scripts)
‚îÇ  ‚îú‚îÄ github-actions/     # GitHub Actions workflows
‚îÇ  ‚îî‚îÄ fly/                # Fly.io –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ
‚îú‚îÄ spec/                   # –¢–µ—Ö–Ω—ñ—á–Ω—ñ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
‚îî‚îÄ README.md
```

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –í–∏–º–æ–≥–∏

- **Java 21+** (–¥–ª—è trading-core —Ç–∞ agent-builder)
- **Node.js 18+** (–¥–ª—è agent-console)
- **Docker** (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É)
- **Maven –∞–±–æ Gradle** (–¥–ª—è –∑–±—ñ—Ä–∫–∏ Java –º–æ–¥—É–ª—ñ–≤)

### –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)

```bash
# 1. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
cp cicd/local/env.example .env

# 2. –ó—ñ–±—Ä–∞—Ç–∏ –≤—Å—ñ –º–æ–¥—É–ª—ñ
./gradlew :app:trading-core:bootJar :app:agent-builder:shadowJar
(cd app/agent-console && npm install && npm run build)

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏
./cicd/local/run-local.sh

# UI –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ http://localhost:8083
```

### –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ (—á–µ—Ä–µ–∑ Docker Compose)

```bash
docker compose -f cicd/local/docker-compose.yml up --build

# UI –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ http://localhost:8080
```

## üîß –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### Trading Core (–ø–æ—Ä—Ç 8081)

–†–µ–∞–ª—ñ–∑—É—î —Ç–æ—Ä–≥–æ–≤—É –ª–æ–≥—ñ–∫—É –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —á–∏—Å—Ç–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏:

- **ExchangeGateway** ‚Äî —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Binance (Spot/Futures)
- **MarketDataFeed** ‚Äî WebSocket —Å—Ç—Ä—ñ–º–∏ (trades, klines, depth)
- **RiskManager** ‚Äî guardrails —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–µ—Ä–µ–¥ –∫–æ–∂–Ω–∏–º –æ—Ä–¥–µ—Ä–æ–º
- **OrderRouter** ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è —Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ—Ä–¥–µ—Ä—ñ–≤
- **Sandbox Mode** ‚Äî –µ–º—É–ª—è—Ü—ñ—è —Ç–æ—Ä–≥—ñ–≤–ª—ñ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö –∫–æ—à—Ç—ñ–≤

#### –õ–æ–≥—ñ–∫–∞ —Ä–∏–∑–∏–∫—É

- Max % equity per trade
- Daily loss limit
- –ó–∞–±–æ—Ä–æ–Ω–∞ –Ω–∞ —É—Å–µ—Ä–µ–¥–Ω–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ–π
- –û–±–æ–≤'—è–∑–∫–æ–≤—ñ SL/TP
- Auto-pause –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö –±—ñ—Ä–∂—ñ (429/418/time-skew)

### Agent Builder (–ø–æ—Ä—Ç 8082)

LLM runtime –∑ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ Trading Core:

- `getPortfolio` ‚Äî –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π –ø–æ—Ä—Ç—Ñ–µ–ª—å
- `placeOrderSafe` ‚Äî —Ä–æ–∑–º—ñ—Å—Ç–∏—Ç–∏ –æ—Ä–¥–µ—Ä –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é —Ä–∏–∑–∏–∫—ñ–≤
- `cancelOrder` ‚Äî —Å–∫–∞—Å—É–≤–∞—Ç–∏ –∞–∫—Ç–∏–≤–Ω–∏–π –æ—Ä–¥–µ—Ä
- `evaluateSignals` ‚Äî –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç–æ—Ä–≥–æ–≤–∏–π —Å–∏–≥–Ω–∞–ª

**Guardrails:**
- –ù–µ –¥–æ–∑–≤–æ–ª—è—î —É–≥–æ–¥–∏ –±–µ–∑ SL/TP
- –û–±–º–µ–∂—É—î —Ä–æ–∑–º—ñ—Ä –ø–æ–∑–∏—Ü—ñ—ó (% –≤—ñ–¥ equity)
- –õ–æ–≥—É—î –≤—Å—ñ —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è –∞—É–¥–∏—Ç—É

### Agent Console (–ø–æ—Ä—Ç 8083)

–í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è:

- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –ø–æ—Ä—Ç—Ñ–µ–ª—è —Ç–∞ –ø–æ–∑–∏—Ü—ñ–π
- –ü–µ—Ä–µ–≥–ª—è–¥—É —ñ—Å—Ç–æ—Ä—ñ—ó —Ç–æ—Ä–≥—ñ–≤
- –ö–æ–Ω—Ç—Ä–æ–ª—é LLM-–∞–≥–µ–Ω—Ç–∞
- –ü–µ—Ä–µ–≥–ª—è–¥—É –ª–æ–≥—ñ–≤ —Ç–∞ –º–µ—Ç—Ä–∏–∫

## üìä Trading Flow

```
User/Scheduler ‚Üí LLM Agent ‚Üí evaluateSignals() ‚Üí Signal
                           ‚Üì
                  placeOrderSafe() ‚Üí RiskManager.validate()
                           ‚Üì
                  ExchangeGateway.placeOrder() ‚Üí Binance API
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# Unit —Ç–µ—Å—Ç–∏
./gradlew test

# Integration —Ç–µ—Å—Ç–∏ (–∑ sandbox)
./gradlew integrationTest

# E2E —Ç–µ—Å—Ç–∏
npm run test:e2e
```

## üö¢ –î–µ–ø–ª–æ–π –Ω–∞ Fly.io

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –¥–µ–ø–ª–æ–π (—á–µ—Ä–µ–∑ GitHub Actions)

Push –¥–æ `main` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—î –¥–µ–ø–ª–æ–π:

```bash
git push origin main
```

GitHub Action –∑—ñ–±–µ—Ä–µ –≤—Å—ñ –º–æ–¥—É–ª—ñ, —Å—Ç–≤–æ—Ä–∏—Ç—å Docker –æ–±—Ä–∞–∑ —Ç–∞ –∑–∞–¥–µ–ø–ª–æ—ó—Ç—å –Ω–∞ Fly.io.

### –†—É—á–Ω–∏–π –¥–µ–ø–ª–æ–π

```bash
cd cicd/fly
fly deploy
```

### –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ —Å–µ–∫—Ä–µ—Ç–∏ (GitHub Secrets)

- `FLY_API_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω –¥–ª—è Fly.io CLI
- `BINANCE_API_KEY` ‚Äî –∫–ª—é—á API Binance
- `BINANCE_API_SECRET` ‚Äî —Å–µ–∫—Ä–µ—Ç API Binance
- `OPENAI_API_KEY` ‚Äî –∫–ª—é—á OpenAI (–¥–ª—è LLM)

## üí∞ –í–∞—Ä—Ç—ñ—Å—Ç—å —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

- Fly.io 1 GB RAM: **~$5-6/–º—ñ—Å**
- Static IP (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ): **$2/–º—ñ—Å**
- **–†–∞–∑–æ–º –¥–ª—è MVP: ~$7-8/–º—ñ—Å**

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- [–ü–æ–≤–Ω–∞ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è](spec/spec_tradin_bot_with_cicd.md) ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ñ –≤–∏–º–æ–≥–∏ —Ç–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
- [CHANGELOG](CHANGELOG.md) ‚Äî —ñ—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω –ø—Ä–æ—î–∫—Ç—É
- [DEPLOY-SPEC-FLYIO](docs/DEPLOY-SPEC-FLYIO.md) ‚Äî —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ –¥–µ–ø–ª–æ—é

## üîê –ë–µ–∑–ø–µ–∫–∞

- Agent Builder –Ω–µ –º–∞—î –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ –∫–ª—é—á—ñ–≤ –±—ñ—Ä–∂—ñ
- –í—Å—ñ –∑–∞–ø–∏—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å —á–µ—Ä–µ–∑ Core API –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é
- –õ–æ–≥–∏ –Ω–µ –º—ñ—Å—Ç—è—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω–∏—Ö –¥–∞–Ω–∏—Ö (correlation-id only)
- Bearer token –¥–ª—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ —Å—Ç–µ–Ω–¥—É (`ADMIN_TOKEN`)

## üõ£Ô∏è Roadmap

- [x] Scaffold –ø—Ä–æ—î–∫—Ç—É —Ç–∞ –±–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [ ] Trading Core –∑ sandbox mode
- [ ] Agent Builder runtime —Ç–∞ tools
- [ ] Agent Console UI
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Binance API
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ Fly.io
- [ ] Backtesting framework
- [ ] Advanced —Ä–∏–∑–∏–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
- [ ] Multi-exchange support

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT

## ü§ù –í–Ω–µ—Å–æ–∫

–ü—Ä–æ—î–∫—Ç –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∞–∫—Ç–∏–≤–Ω—ñ–π —Ä–æ–∑—Ä–æ–±—Ü—ñ. Pull requests –≤—ñ—Ç–∞—é—Ç—å—Å—è!

---

**‚ö†Ô∏è Disclaimer:** –¢–æ—Ä–≥—ñ–≤–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞–º–∏ –Ω–µ—Å–µ —Ä–∏–∑–∏–∫–∏. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ü–µ–π –±–æ—Ç –Ω–∞ –≤–ª–∞—Å–Ω–∏–π —Ä–∏–∑–∏–∫. –ü–æ—á–∏–Ω–∞–π—Ç–µ –∑ sandbox mode —Ç–∞ —Ç–µ—Å—Ç–æ–≤–∏—Ö —Ä–∞—Ö—É–Ω–∫—ñ–≤.

